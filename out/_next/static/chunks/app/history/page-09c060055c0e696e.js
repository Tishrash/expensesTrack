(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{4456:function(e,t,r){Promise.resolve().then(r.bind(r,1670))},1670:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(3827),a=r(4090),n=r(3779),i=r(1160),o=r(3125),l=r(7907),c=r(6770);let d=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),u=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),m=["All Categories","Food","Transport","Bills","Entertainment","Shopping","Healthcare","Education","Savings","Budgeting"];function x(e){let{expense:t,isOpen:r,onClose:n,onSave:i}=e,[o,l]=(0,a.useState)({id:"",amount:0,category:"Food",date:"",description:"",userId:""});return((0,a.useEffect)(()=>{t&&l(t)},[t]),r)?(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Edit Expense"}),(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-500",children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(o),n()},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount (LKR)"}),(0,s.jsxs)("div",{className:"relative mt-1",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:"LKR"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:o.amount,onChange:e=>l({...o,amount:parseFloat(e.target.value)}),className:"pl-12 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,min:"0"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsx)("select",{value:o.category,onChange:e=>l({...o,category:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:m.slice(1).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,s.jsx)("input",{type:"date",value:o.date,onChange:e=>l({...o,date:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("input",{type:"text",value:o.description,onChange:e=>l({...o,description:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border rounded-md text-gray-600 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Changes"})]})]})]})}):null}let g=e=>"LKR ".concat(e.toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2}));function h(){let e=(0,l.useRouter)(),{user:t,isLoading:r}=(0,n.useAuth)(),[h,p]=(0,a.useState)([]),[f,y]=(0,a.useState)([]),[b,v]=(0,a.useState)(""),[j,w]=(0,a.useState)("All Categories"),[N,S]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[C,I]=(0,a.useState)(!0),[L,D]=(0,a.useState)(!1),[_,Z]=(0,a.useState)(""),[O,F]=(0,a.useState)("success"),[A,T]=(0,a.useState)(null),[J,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{r||(t?H():e.push("/login"))},[t,r,e]);let H=()=>{if(t)try{let e=JSON.parse(localStorage.getItem("expenses_".concat(t.id))||"[]");p(e),y(e)}catch(e){console.error("Error loading expenses:",e)}finally{I(!1)}},M=e=>{if(t)try{let r=h.filter(t=>t.id!==e);localStorage.setItem("expenses_".concat(t.id),JSON.stringify(r)),p(r),Z("Expense deleted successfully"),F("success"),D(!0)}catch(e){console.error("Error deleting expense:",e),Z("Failed to delete expense"),F("error"),D(!0)}},B=e=>{T(e),R(!0)};(0,a.useEffect)(()=>{P()},[b,j,N,k,h]);let P=()=>{let e=[...h];b&&(e=e.filter(e=>e.description.toLowerCase().includes(b.toLowerCase()))),j&&"All Categories"!==j&&(e=e.filter(e=>e.category===j)),N&&(e=e.filter(e=>new Date(e.date)>=new Date(N))),k&&(e=e.filter(e=>new Date(e.date)<=new Date(k))),e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),y(e)};return r||C?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})]}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(i.Z,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Expense History"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Total Records: ",f.length]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,s.jsx)("input",{type:"text",id:"search",placeholder:"Search expenses...",value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsx)("select",{id:"category",value:j,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,s.jsx)("input",{type:"date",id:"startDate",value:N,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,s.jsx)("input",{type:"date",id:"endDate",value:k,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:f.length>0?(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,o.WU)(new Date(e.date),"MMM dd, yyyy")}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.description}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\n                          ".concat("Food"===e.category?"bg-green-100 text-green-800":"Transport"===e.category?"bg-blue-100 text-blue-800":"Bills"===e.category?"bg-red-100 text-red-800":"Entertainment"===e.category?"bg-purple-100 text-purple-800":"Shopping"===e.category?"bg-yellow-100 text-yellow-800":"Healthcare"===e.category?"bg-pink-100 text-pink-800":"Education"===e.category?"bg-indigo-100 text-indigo-800":"Savings"===e.category?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800"),children:e.category})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g(e.amount)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>B(e),className:"text-blue-600 hover:text-blue-900 transition-colors duration-200",title:"Edit expense",children:(0,s.jsx)(d,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>M(e.id),className:"text-red-600 hover:text-red-900 transition-colors duration-200",title:"Delete expense",children:(0,s.jsx)(u,{className:"h-5 w-5"})})]})})]},e.id))})]}):(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No expenses found matching your criteria."})})})})]}),(0,s.jsx)(x,{expense:A,isOpen:J,onClose:()=>{R(!1),T(null)},onSave:e=>{if(t)try{let r=h.map(t=>t.id===e.id?e:t);localStorage.setItem("expenses_".concat(t.id),JSON.stringify(r)),p(r),Z("Expense updated successfully"),F("success"),D(!0)}catch(e){console.error("Error updating expense:",e),Z("Failed to update expense"),F("error"),D(!0)}}}),L&&(0,s.jsx)(c.Z,{message:_,type:O,onClose:()=>D(!1)})]}):null}},1160:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var s=r(3827),a=r(8792),n=r(7907),i=r(3779),o=r(3536),l=r(3768),c=r(1067),d=r(3478),u=r(1040),m=r(7913);function x(){let e=(0,n.usePathname)(),{user:t,logout:r}=(0,i.useAuth)();if(!t)return null;let x=t=>e===t,g=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"Add Expense",href:"/add-expense",icon:l.Z},{name:"History",href:"/history",icon:c.Z},{name:"Financial Tasks",href:"/financial-tasks",icon:d.Z}];return(0,s.jsx)("nav",{className:"bg-white shadow-lg border-b border-gray-100",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,s.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"ExpenseTracker"})}),(0,s.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:g.map(e=>{let t=e.icon;return(0,s.jsxs)(a.default,{href:e.href,className:"inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium transition-colors duration-200 ".concat(x(e.href)?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,s.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.name)})})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("div",{className:"ml-3 relative",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-8 w-8 text-gray-400"}),(0,s.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:t.name})]}),(0,s.jsxs)("button",{onClick:()=>{r()},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Logout"]})]})})})]})})})}},6770:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(3827),a=r(4090),n=r(3835),i=r(3753),o=r(8621);function l(e){let{message:t,type:r,onClose:l}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{l()},3e3);return()=>clearTimeout(e)},[l]),(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,s.jsxs)("div",{className:"rounded-lg p-4 flex items-center space-x-2 shadow-lg ".concat("success"===r?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:["success"===r?(0,s.jsx)(n.Z,{className:"h-5 w-5 text-green-400"}):(0,s.jsx)(i.Z,{className:"h-5 w-5 text-red-400"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:t}),(0,s.jsx)("button",{onClick:l,className:"ml-4 inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("success"===r?"hover:bg-green-200 focus:ring-green-500":"hover:bg-red-200 focus:ring-red-500"),children:(0,s.jsx)(o.Z,{className:"h-5 w-5"})})]})})}},3779:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return l},useAuth:function(){return c}});var s=r(3827),a=r(4090),n=r(7907),i=r(146);let o=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),u=(0,n.useRouter)();(0,a.useEffect)(()=>{if(i.Z.get("auth_token")){let e=localStorage.getItem("current_user");e&&l(JSON.parse(e))}d(!1)},[]);let m=e=>{localStorage.getItem("expenses_".concat(e))||localStorage.setItem("expenses_".concat(e),JSON.stringify([{id:"1",amount:150.5,category:"Food",date:"2024-03-15",description:"Grocery shopping at Walmart",userId:e},{id:"2",amount:45,category:"Transport",date:"2024-03-14",description:"Gas station refill",userId:e},{id:"3",amount:200,category:"Bills",date:"2024-03-13",description:"Monthly electricity bill",userId:e},{id:"4",amount:75.25,category:"Entertainment",date:"2024-03-12",description:"Movie night with friends",userId:e},{id:"5",amount:120,category:"Shopping",date:"2024-03-11",description:"New clothes from H&M",userId:e},{id:"6",amount:85,category:"Healthcare",date:"2024-03-10",description:"Monthly medicine prescription",userId:e},{id:"7",amount:299.99,category:"Education",date:"2024-03-09",description:"Online course subscription",userId:e},{id:"8",amount:500,category:"Savings",date:"2024-03-08",description:"Monthly savings deposit",userId:e},{id:"9",amount:65.5,category:"Food",date:"2024-03-07",description:"Restaurant dinner",userId:e},{id:"10",amount:35,category:"Transport",date:"2024-03-06",description:"Uber ride",userId:e},{id:"11",amount:89.99,category:"Bills",date:"2024-03-05",description:"Internet bill",userId:e},{id:"12",amount:150,category:"Shopping",date:"2024-03-04",description:"Electronics accessories",userId:e},{id:"13",amount:250,category:"Healthcare",date:"2024-03-03",description:"Dental checkup",userId:e},{id:"14",amount:50,category:"Entertainment",date:"2024-03-02",description:"Gaming subscription",userId:e},{id:"15",amount:1e3,category:"Savings",date:"2024-03-01",description:"Emergency fund contribution",userId:e}]))},x=async(e,t)=>{try{if("tishanrashmika00@gmail.com"===e&&"Tishan@123"===t){let t={id:"1",email:e,name:"Tishan Rashmika"};localStorage.setItem("current_user",JSON.stringify(t)),l(t),i.Z.set("auth_token","demo_token",{expires:1}),m(t.id),u.push("/dashboard");return}let r=JSON.parse(localStorage.getItem("registeredUsers")||"[]").find(t=>t.email.toLowerCase()===e.toLowerCase());if(!r||r.password!==t)throw Error("Invalid credentials");let s={id:r.id,email:r.email,name:r.name};localStorage.setItem("current_user",JSON.stringify(s)),l(s),i.Z.set("auth_token","user_token",{expires:1}),m(s.id),u.push("/dashboard")}catch(e){throw console.error("Login error:",e),e}},g=async(e,t,r)=>{try{let s=JSON.parse(localStorage.getItem("registeredUsers")||"[]");if(s.some(t=>t.email.toLowerCase()===e.toLowerCase()))throw Error("Email already registered");let a=Date.now().toString();s.push({id:a,email:e,name:t,password:r}),localStorage.setItem("registeredUsers",JSON.stringify(s));let n={id:a,email:e,name:t};localStorage.setItem("current_user",JSON.stringify(n)),l(n),i.Z.set("auth_token","user_token",{expires:1}),m(a),u.push("/dashboard")}catch(e){throw console.error("Signup error:",e),e}},h=()=>{localStorage.removeItem("current_user"),i.Z.remove("auth_token"),l(null),u.push("/login")};return(0,a.useEffect)(()=>{let e=()=>{h()};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,s.jsx)(o.Provider,{value:{user:r,isLoading:c,login:x,signup:g,logout:h},children:t})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[250,355,971,69,744],function(){return e(e.s=4456)}),_N_E=e.O()}]);