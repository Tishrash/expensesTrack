(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1531:function(e,t,s){Promise.resolve().then(s.bind(s,7736))},7736:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(3827),a=s(4090),n=s(3779),i=s(1160),o=s(6136),c=s(1196),l=s(6770);o.kL.register(o.qi,o.u,o.De,o.uw,o.f$,o.ZL);let d=e=>"LKR ".concat(e.toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2}));function u(){let{user:e,isLoading:t}=(0,n.useAuth)(),[s,o]=(0,a.useState)([]),[u,m]=(0,a.useState)({total:0,averageExpense:0,categorySums:{}}),[g,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(""),[f,b]=(0,a.useState)("success"),[y,N]=(0,a.useState)({labels:[],datasets:[{data:[],backgroundColor:[]}]}),[v,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(e){let t=JSON.parse(localStorage.getItem("expenses_".concat(e.id))||"[]");o(t),w(t)}},[e]),(0,a.useEffect)(()=>{if(s.length>0){let e=w(s);m(e),N({labels:Object.keys(e.categorySums),datasets:[{data:Object.values(e.categorySums),backgroundColor:["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#14B8A6"]}]})}},[s]);let w=e=>{let t=e.reduce((e,t)=>e+t.amount,0),s=e.length>0?t/e.length:0;return{total:t,averageExpense:s,categorySums:e.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+t.amount,e),{})}},S={labels:Object.keys(u.categorySums),datasets:[{label:"Expenses by Category",data:Object.values(u.categorySums),backgroundColor:"#36A2EB"}]};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,r.jsxs)("p",{className:"mt-2 text-gray-600",children:["Welcome back, ",null==e?void 0:e.name]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Total Expenses"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:d(u.total)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Average Expense"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:d(u.averageExpense)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Number of Transactions"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:s.length})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expense Distribution"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(c.by,{data:y,options:{responsive:!0,plugins:{legend:{position:"right"}}}})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Expenses by Category"}),(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(c.$Q,{data:S,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})]})]}),g&&(0,r.jsx)(l.Z,{message:x,type:f,onClose:()=>h(!1)})]})}},1160:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var r=s(3827),a=s(8792),n=s(7907),i=s(3779),o=s(3536),c=s(3768),l=s(1067),d=s(3478),u=s(1040),m=s(7913);function g(){let e=(0,n.usePathname)(),{user:t,logout:s}=(0,i.useAuth)();if(!t)return null;let g=t=>e===t,h=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"Add Expense",href:"/add-expense",icon:c.Z},{name:"History",href:"/history",icon:l.Z},{name:"Financial Tasks",href:"/financial-tasks",icon:d.Z}];return(0,r.jsx)("nav",{className:"bg-white shadow-lg border-b border-gray-100",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,r.jsx)("span",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"ExpenseTracker"})}),(0,r.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:h.map(e=>{let t=e.icon;return(0,r.jsxs)(a.default,{href:e.href,className:"inline-flex items-center px-3 py-2 border-b-2 text-sm font-medium transition-colors duration-200 ".concat(g(e.href)?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:[(0,r.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.name)})})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("div",{className:"ml-3 relative",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-8 w-8 text-gray-400"}),(0,r.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:t.name})]}),(0,r.jsxs)("button",{onClick:()=>{s()},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Logout"]})]})})})]})})})}},6770:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(3827),a=s(4090),n=s(3835),i=s(3753),o=s(8621);function c(e){let{message:t,type:s,onClose:c}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{c()},3e3);return()=>clearTimeout(e)},[c]),(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,r.jsxs)("div",{className:"rounded-lg p-4 flex items-center space-x-2 shadow-lg ".concat("success"===s?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:["success"===s?(0,r.jsx)(n.Z,{className:"h-5 w-5 text-green-400"}):(0,r.jsx)(i.Z,{className:"h-5 w-5 text-red-400"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:t}),(0,r.jsx)("button",{onClick:c,className:"ml-4 inline-flex rounded-md p-1.5 hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("success"===s?"hover:bg-green-200 focus:ring-green-500":"hover:bg-red-200 focus:ring-red-500"),children:(0,r.jsx)(o.Z,{className:"h-5 w-5"})})]})})}},3779:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return c},useAuth:function(){return l}});var r=s(3827),a=s(4090),n=s(7907),i=s(146);let o=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),u=(0,n.useRouter)();(0,a.useEffect)(()=>{if(i.Z.get("auth_token")){let e=localStorage.getItem("current_user");e&&c(JSON.parse(e))}d(!1)},[]);let m=e=>{localStorage.getItem("expenses_".concat(e))||localStorage.setItem("expenses_".concat(e),JSON.stringify([{id:"1",amount:150.5,category:"Food",date:"2024-03-15",description:"Grocery shopping at Walmart",userId:e},{id:"2",amount:45,category:"Transport",date:"2024-03-14",description:"Gas station refill",userId:e},{id:"3",amount:200,category:"Bills",date:"2024-03-13",description:"Monthly electricity bill",userId:e},{id:"4",amount:75.25,category:"Entertainment",date:"2024-03-12",description:"Movie night with friends",userId:e},{id:"5",amount:120,category:"Shopping",date:"2024-03-11",description:"New clothes from H&M",userId:e},{id:"6",amount:85,category:"Healthcare",date:"2024-03-10",description:"Monthly medicine prescription",userId:e},{id:"7",amount:299.99,category:"Education",date:"2024-03-09",description:"Online course subscription",userId:e},{id:"8",amount:500,category:"Savings",date:"2024-03-08",description:"Monthly savings deposit",userId:e},{id:"9",amount:65.5,category:"Food",date:"2024-03-07",description:"Restaurant dinner",userId:e},{id:"10",amount:35,category:"Transport",date:"2024-03-06",description:"Uber ride",userId:e},{id:"11",amount:89.99,category:"Bills",date:"2024-03-05",description:"Internet bill",userId:e},{id:"12",amount:150,category:"Shopping",date:"2024-03-04",description:"Electronics accessories",userId:e},{id:"13",amount:250,category:"Healthcare",date:"2024-03-03",description:"Dental checkup",userId:e},{id:"14",amount:50,category:"Entertainment",date:"2024-03-02",description:"Gaming subscription",userId:e},{id:"15",amount:1e3,category:"Savings",date:"2024-03-01",description:"Emergency fund contribution",userId:e}]))},g=async(e,t)=>{try{if("tishanrashmika00@gmail.com"===e&&"Tishan@123"===t){let t={id:"1",email:e,name:"Tishan Rashmika"};localStorage.setItem("current_user",JSON.stringify(t)),c(t),i.Z.set("auth_token","demo_token",{expires:1}),m(t.id),u.push("/dashboard");return}let s=JSON.parse(localStorage.getItem("registeredUsers")||"[]").find(t=>t.email.toLowerCase()===e.toLowerCase());if(!s||s.password!==t)throw Error("Invalid credentials");let r={id:s.id,email:s.email,name:s.name};localStorage.setItem("current_user",JSON.stringify(r)),c(r),i.Z.set("auth_token","user_token",{expires:1}),m(r.id),u.push("/dashboard")}catch(e){throw console.error("Login error:",e),e}},h=async(e,t,s)=>{try{let r=JSON.parse(localStorage.getItem("registeredUsers")||"[]");if(r.some(t=>t.email.toLowerCase()===e.toLowerCase()))throw Error("Email already registered");let a=Date.now().toString();r.push({id:a,email:e,name:t,password:s}),localStorage.setItem("registeredUsers",JSON.stringify(r));let n={id:a,email:e,name:t};localStorage.setItem("current_user",JSON.stringify(n)),c(n),i.Z.set("auth_token","user_token",{expires:1}),m(a),u.push("/dashboard")}catch(e){throw console.error("Signup error:",e),e}},x=()=>{localStorage.removeItem("current_user"),i.Z.remove("auth_token"),c(null),u.push("/login")};return(0,a.useEffect)(()=>{let e=()=>{x()};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,r.jsx)(o.Provider,{value:{user:s,isLoading:l,login:g,signup:h,logout:x},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[674,250,423,971,69,744],function(){return e(e.s=1531)}),_N_E=e.O()}]);